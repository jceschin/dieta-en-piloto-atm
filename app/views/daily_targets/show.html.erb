<div class="container" style="background-color: white; width: auto; height: 100%">
  <h1 class="font-weight-bold text-left py-2 mt-2 border-bottom" style="font-size: 18px">Tus objetivos del día<!-- <i class="fas fa-pencil-alt ml-3"></i> --></h1>
  <!--<div class="text-center">
    <%= link_to edit_daily_target_path(@daily_target.id), class: "link" do  %>

    <% end %>
    <p class="m-0 p-0 ml-5 pl-5"><small>objetivo</small></p>
    <div class="d-flex justify-content-center align-items-center m-3">
      <div class="border" style="background-color: #71CC34; border-style: hidden; border-radius: 8px 1px 1px 8px">
        <p class="my-0 p-1">Consumido</p>
      </div>
      <div>
        <p class="my-0 p-1 border" style="border-radius: 1px 8px 8px 1px">Restante</p>
      </div>
    </div>
  </div> -->
  <div class="d-flex justify-content-between mb-2 mt-0">
    <p class="mb-0 mt-3" style="font-size: 14px">Calorías</p>
    <p class="mb-0 mt-3" style="font-size: 14px"><%= @daily_target.caloric_target - @cal_left %> / <%= @daily_target.caloric_target %> kcal</p>
  </div>
  <!-- <div class="text-right my-0">
    <%= link_to edit_daily_target_path(@daily_target.id), class: "link" do  %>
      <span><small><%= @daily_target.caloric_target %></small></span>
    <% end %>
  </div> -->

  <% width_consumed_cal = (@daily_target.caloric_target - @cal_left)/@daily_target.caloric_target.to_f*100 %>
  <% if @cal_left < 0 %>
    <% width_consumed_cal = 100%>
    <% cal_range_color = "red"%>
    <% cal_text_color = "white" %>
  <% elsif width_consumed_cal >= 60 %>
    <% cal_range_color = "#ffc93c"%>
    <% width_consumed_cal %>
  <%else%>
    <% width_consumed_cal %>
    <% cal_range_color = "#71CC34" %>
    <% width_cal_left = @cal_left/@daily_target.caloric_target.to_f*100 %>
  <% end %>
  <div class="d-flex w-100 mt-0 justify-content-center align-items-center">
    <div class="text-left px-2 border" style="width:<%= width_consumed_cal %>%; background-color: <%= cal_range_color %>; border-style: hidden; border-radius: 8px 1px 1px 8px">
      <span style="color:<%= cal_text_color %>; font-size: 14px" ><%= @daily_target.caloric_target - @cal_left %></span>
    </div>
    <% if @cal_left <= 0 %>
      <% @cal_left = nil%>
    <%else%>
      <% @cal_left %>
      <% width_cal_left = @cal_left/@daily_target.caloric_target.to_f*100 %>
    <% end %>
    <div class="text-right px-2 border" style="width:<%= width_cal_left %>%; border-style: hidden; border-radius: 1px 8px 8px 1px">
      <span style="font-size:14px; vertical-align: center"><%= @cal_left %></span>
    </div>
  </div>

  <div class="d-flex justify-content-between mb-2 mt-0">
    <p class="mb-0 mt-3" style="font-size: 14px">Proteínas</p>
    <p class="mb-0 mt-3" style="font-size: 14px"><%= @daily_target.protein_target - @proteins_left %> / <%= @daily_target.protein_target %> g</p>
  </div>
  <!-- <div class="text-right my-0">
    <%= link_to edit_daily_target_path(@daily_target.id), class: "link" do  %>
      <span><small><%= @daily_target.protein_target %></small></span>
    <% end %>
  </div> -->
  <% width_consumed_proteins = (@daily_target.protein_target - @proteins_left)/@daily_target.protein_target.to_f*100 %>
  <% if @proteins_left < 0 %>
    <% width_consumed_proteins = 100%>
    <% proteins_range_color = "red"%>
    <% proteins_text_color = "white" %>
  <% elsif width_consumed_proteins >= 60 %>
    <% proteins_range_color = "#ffc93c"%>
    <% width_consumed_proteins %>
  <%else%>
    <% width_consumed_proteins %>
    <% proteins_range_color = "#71CC34" %>
    <% width_proteins_left = @proteins_left/@daily_target.protein_target.to_f*100 %>
  <% end %>
  <div class="d-flex w-100 mt-0 justify-content-center align-items-center">
    <div class="text-left px-2 border" style="width:<%= width_consumed_proteins %>%; background-color: <%= proteins_range_color %>; border-style: hidden; border-radius: 8px 1px 1px 8px">
      <span style="color:<%= proteins_text_color %>; font-size: 14px" ><%= @daily_target.protein_target - @proteins_left%></span>
    </div>
    <% if @proteins_left <= 0 %>
      <% @proteins_left = nil%>
    <%else%>
      <% @proteins_left %>
      <% width_proteins_left = @proteins_left/@daily_target.protein_target.to_f*100 %>
    <% end %>
    <div class="text-right px-2 border" style="width:<%= width_proteins_left %>%; border-style: hidden; border-radius: 1px 8px 8px 1px">
      <span style="font-size: 14px"><%= @proteins_left %></span>
    </div>
  </div>

  <div class="d-flex justify-content-between mb-2 mt-0">
    <p class="mb-0 mt-3" style="font-size: 14px">Carbohidratos</p>
    <p class="mb-0 mt-3" style="font-size: 14px"><%= @daily_target.carb_target - @carbs_left %> / <%= @daily_target.carb_target %> g</p>
  </div>
  <!-- <div class="text-right my-0">
    <%= link_to edit_daily_target_path(@daily_target.id), class: "link" do  %>
      <span><small><%= @daily_target.carb_target %></small></span>
    <% end %>
  </div> -->
  <% width_consumed_carbs = (@daily_target.carb_target - @carbs_left)/@daily_target.carb_target.to_f*100 %>
  <% if @carbs_left < 0 %>
    <% width_consumed_carbs = 100%>
    <% carbs_range_color = "red"%>
    <% carbs_text_color = "white" %>
  <% elsif width_consumed_carbs >= 60 %>
    <% carbs_range_color = "#ffc93c"%>
    <% width_consumed_carbs %>
  <%else%>
    <% width_consumed_carbs %>
    <% carbs_range_color = "#71CC34" %>
    <% width_carbs_left = @carbs_left/@daily_target.carb_target.to_f*100 %>
  <% end %>
  <div class="d-flex w-100 mt-0 justify-content-center align-items-center">
    <div class="text-left px-2 border" style="width:<%= width_consumed_carbs %>%; background-color: <%= carbs_range_color %>; border-style: hidden; border-radius: 8px 1px 1px 8px">
      <span style="color:<%= carbs_text_color %>; font-size: 14px" ><%= @daily_target.carb_target - @carbs_left %></span>
    </div>
    <% if @carbs_left <= 0 %>
      <% @carbs_left = nil%>
    <%else%>
      <% @carbs_left %>
      <% width_carbs_left = @carbs_left/@daily_target.carb_target.to_f*100 %>
    <% end %>
    <div class="text-right px-2 border" style="width:<%= width_carbs_left %>%; border-style: hidden; border-radius: 1px 8px 8px 1px">
      <span style="font-size: 14px"><%= @carbs_left %></span>
    </div>
  </div>

  <div class="d-flex justify-content-between mb-2 mt-0">
    <p class="mb-0 mt-3" style="font-size: 14px">Grasas Totales</p>
    <p class="mb-0 mt-3" style="font-size: 14px"><%= @daily_target.fat_target - @fats_left %> / <%= @daily_target.fat_target %> g</p>
  </div>
  <!-- <div class="text-right my-0">
    <%= link_to edit_daily_target_path(@daily_target.id), class: "link" do  %>
      <span><small><%= @daily_target.fat_target %></small></span>
    <% end %>
  </div> -->
  <% width_consumed_fats = (@daily_target.fat_target - @fats_left)/@daily_target.fat_target.to_f*100 %>
  <% if @fats_left < 0 %>
    <% width_consumed_fats = 100%>
    <% fats_range_color = "red"%>
    <% fats_text_color = "white" %>
  <% elsif width_consumed_fats >= 60 %>
    <% fats_range_color = "#ffc93c"%>
    <% width_consumed_fats %>
  <%else%>
    <% width_consumed_fats %>
    <% fats_range_color = "#71CC34" %>
    <% width_fats_left = @fats_left/@daily_target.fat_target.to_f*100 %>
  <% end %>
  <div class="d-flex w-100 mt-0 justify-content-center align-items-center">
    <div class="text-left px-2 border" style="width:<%= width_consumed_fats %>%; background-color: <%= fats_range_color %>; border-style: hidden; border-radius: 8px 1px 1px 8px">
      <span style="color:<%= fats_text_color %>; font-size: 14px" ><%= @daily_target.fat_target - @fats_left %></span>
    </div>
    <% if @fats_left <= 0 %>
      <% @fats_left = nil%>
    <%else%>
      <% @fats_left %>
      <% width_fats_left = @fats_left/@daily_target.fat_target.to_f*100 %>
    <% end %>
    <div class="text-right px-2 border" style="width:<%= width_fats_left %>%; border-style: hidden; border-radius: 1px 8px 8px 1px">
      <span style="font-size: 14px"><%= @fats_left %></span>
    </div>
  </div>
  <div class="row justify-content-center mt-3">
    <div class="col-12 col-lg-6 text-center px-2">
      <% if @items_consumed_today.any? %>
        <h1 class="text-left font-weight-bold py-2 px-1 border-bottom" style="font-size: 18px">Consumos del día</h1>
        <!--<div class="d-flex align-items-center justify-content-center">
          <%= link_to new_item_path, class: "link d-flex align-items-center" do  %>
          <i class="fas fa-plus ml-0 pl-4" style="font-size:130%"></i>
          <% end %>
        </div>-->
        <% @items_consumed_today.each do |item|%>
          <ul class="w-100 px-0">
            <div class="d-flex justify-content-center my-3" style="background-color: #F1F1F1; border-radius: 8px; box-shadow: 0 0 5px rgba(0, 0, 0, 0.4); font-weight: bold; font-size: 14px">
              <%= link_to edit_item_path(item), class: "link d-flex align-items-center" do  %>
                <li class="w-100 py-2" style="list-style:none; font-size:120%"><!-- <i class="fas fa-utensils mr-2 text-center" style="font-size:70%"></i> --><%= item.name %><br><small style="font-size: 14px">Calorías: <%= item.calories%>, Proteínas: <%= item.proteins%>, Carbohidratos: <%= item.carbs%>, Grasas Totales: <%= item.fats%></small></li>
                <!-- <i class="fas fa-pencil-alt ml-3" style="font-size:100%"></i> -->
              <% end %>
            </div>
          </ul>
        <% end %>
      <% else %>
        <%= link_to new_item_path, class: "link" do  %>
          <div class="d-flex justify-content-center">
            <h1 class="w-100 font-weight-bold mr-0 pr-0" style="font-size: 28px">Sin Consumo Registrado</h1>
            <i class="fas fa-plus ml-0 pl-0" style="font-size:130%"></i>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
